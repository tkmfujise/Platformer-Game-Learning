---
title: src/beginning/chapters/chapter/chapter.tscn
---
:toc:

== src / beginning / chapters / chapter / chapter.tscn

=== Diagram
[plantuml]
....
class R as "Chapter" <<(M,#90EE90) MarginContainer>> {
  * play_opening
  * resource
  * focus_animation_skip
---
  + set_play_opening()
  + focus_returned()
  + selected()
  + unselected()
  + _on_focus_entered()
}
class N1 as "Placeholder" <<(T,#90EE90) TextureRect>> {
}
class N2 as "Sprite2D" <<(S,#87CEFA) Sprite2D>> {
}
class N3 as "AnimationPlayer" <<(A,#FFFF00) AnimationPlayer>> {
}
R --o N1
R --o N2
R --o N3
!define _(a,b) a <-[#blue,thickness=2]- b
left to right direction
_(R::_on_focus_entered, R::focus_entered)
....


[.scene-assets]
=== Assets
[.asset-image]
[link=/assets/assets/images/ui/Chapters/Chapter_0.png]
image::/assets/raw/assets/images/ui/Chapters/Chapter_0.png[200, 100] 





=== Instantiators
* link:/scenes/src/beginning/chapters/chapters.tscn[res://src/beginning/chapters/chapters.tscn]


=== Scene Tree
[.scene-tree]
* [.node-name.type-control]#Chapter# [.node-type.type-control]#MarginContainer#
** [.node-name.type-control]#Placeholder# [.node-type.type-control]#TextureRect#
** [.node-name.type-2d]#Sprite2D# [.node-type.type-2d]#Sprite2D#
** [.node-name.type-other]#AnimationPlayer# [.node-type.type-other]#AnimationPlayer#


=== Signal Connections
[.signal-connection]
.$.:[#_focus_entered_#]=>$.
```gdscript
func _on_focus_entered() -> void:
	if focus_animation_skip: focus_animation_skip = false
	else: %AnimationPlayer.play("focused")
```


=== Animations
==== Animation_ue4pb

[plantuml]
....
control "Root" as R
participant "$Sprite2D" as T0 #87CEFA



== Time: 0.0 ==
R  ->  T0 : scale\n = Vector2(1, 1)
R  ->  T0 : rotation\n = 0.0
R  ->  T0 : position\n = Vector2(77, 72)
R  ->o  R : focus_mode\n = 2
R  ->  T0 : skew\n = 0.0


....
---

==== focused

[plantuml]
....
control "Root" as R
participant "$Sprite2D" as T0 #87CEFA



== Time: 0.0 ==
R  ->  T0 : scale\n = Vector2(1, 1)
R  ->  T0 : rotation\n = 0.523599
== Time: 0.2 ==
R  ->  T0 : scale\n = Vector2(1.2, 1.2)
R  ->  T0 : rotation\n = -0.349066
== Time: 0.5 ==
R  ->  T0 : scale\n = Vector2(1, 1)
R  ->  T0 : rotation\n = 0.0


....
---

==== opening

[plantuml]
....
control "Root" as R
participant "$Sprite2D" as T0 #87CEFA



== Time: 0.0 ==
R  ->  T0 : position\n = Vector2(77, -50)
R  ->o  R : focus_mode\n = 0
== Time: 0.5 ==
R  ->  T0 : position\n = Vector2(77, 72)
R  ->  T0 : scale\n = Vector2(1, 1)
R  ->  T0 : rotation\n = 0.0
R  ->o  R : focus_mode\n = 2


....
---

==== selected

[plantuml]
....
control "Root" as R
participant "$Sprite2D" as T0 #87CEFA



== Time: 0.0 ==
R  ->  T0 : position\n = Vector2(77, 72)
R  ->  T0 : rotation\n = 0.0
R  ->  T0 : scale\n = Vector2(1, 1)
R  ->  T0 : skew\n = 0.0
== Time: 0.233333 ==
R  ->  T0 : scale\n = Vector2(-0.2, 2)
== Time: 0.234984 ==
R  ->  T0 : skew\n = -0.349066
== Time: 0.5 ==
R  ->  T0 : position\n = Vector2(1000, 420)
R  ->  T0 : scale\n = Vector2(1, 1)
R  ->  T0 : skew\n = 0.0


....
---

==== unselected

[plantuml]
....
control "Root" as R
participant "$Sprite2D" as T0 #87CEFA



== Time: 0.0 ==
R  ->  T0 : position\n = Vector2(1000, 420)
R  ->  T0 : rotation\n = 0.0
R  ->  T0 : scale\n = Vector2(1, 1)
R  ->  T0 : skew\n = 0.0
== Time: 0.10168 ==
R  ->  T0 : scale\n = Vector2(0, 2)
R  ->  T0 : skew\n = 0.349066
== Time: 0.3 ==
R  ->  T0 : scale\n = Vector2(1, 1)
R  ->  T0 : skew\n = 0.0
== Time: 0.4 ==
R  ->  T0 : position\n = Vector2(77, 72)


....
---



=== Properties
[.node-property.node-control]
.#Root# properties
[cols="1,3" options="header"]
|===
|Name |Value
|*anchors_preset* a|`-1`
|*anchor_right* a|`0.083`
|*anchor_bottom* a|`0.148`
|*offset_right* a|`0.639984`
|*offset_bottom* a|`0.160004`
|*focus_mode* a|`2`
|*theme_override_constants/margin_left* a|`20`
|*theme_override_constants/margin_top* a|`20`
|*theme_override_constants/margin_right* a|`20`
|*theme_override_constants/margin_bottom* a|`20`
|*script* a|link:/scripts/src/beginning/chapters/chapter/chapter.gd[res://src/beginning/chapters/chapter/chapter.gd]
|===
[.node-property.node-control]
.#$Placeholder# properties
[cols="1,3" options="header"]
|===
|Name |Value
|*unique_name_in_owner* a|`true`
|*custom_minimum_size* a|`Vector2(120, 0)`
|*layout_mode* a|`2`
|===
[.node-property.node-2d]
.#$Sprite2D# properties
[cols="1,3" options="header"]
|===
|Name |Value
|*z_index* a|`4`
|*z_as_relative* a|`false`
|*texture_filter* a|`2`
|*position* a|`Vector2(77, 72)`
|*texture* a|[link=/assets/assets/images/ui/Chapters/Chapter_0.png]
[.asset-image]
.res://assets/images/ui/Chapters/Chapter_0.png
image::/assets/raw/assets/images/ui/Chapters/Chapter_0.png[]

|===
[.node-property.node-other]
.#$AnimationPlayer# properties
[cols="1,3" options="header"]
|===
|Name |Value
|*unique_name_in_owner* a|`true`
|*libraries* a|`{
&"": SubResource("AnimationLibrary_rglud")
}`
|===


=== link:/scripts/src/beginning/chapters/chapter/chapter.gd[chapter.gd]

```gdscript
extends MarginContainer

@export var play_opening := false : set = set_play_opening
@export var resource : ChapterResource
var focus_animation_skip := false


func set_play_opening(val: bool) -> void:
	if val: %AnimationPlayer.play("opening")


func focus_returned() -> void:
	focus_animation_skip = true
	grab_focus()
	focus_animation_skip = false


func selected() -> void:
	%AnimationPlayer.play('selected')


func unselected() -> void:
	%AnimationPlayer.play('unselected')


func _on_focus_entered() -> void:
	if focus_animation_skip: focus_animation_skip = false
	else: %AnimationPlayer.play("focused")

```


