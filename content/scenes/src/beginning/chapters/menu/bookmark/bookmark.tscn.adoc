---
title: src/beginning/chapters/menu/bookmark/bookmark.tscn
---
:toc:

== src / beginning / chapters / menu / bookmark / bookmark.tscn

=== Diagram
[plantuml]
....
class R as "BagBookmark" <<(M,lightgreen) MarginContainer>> {
  ~ pressed
---
  * focused
---
  + _input()
  + set_focus()
  + _on_focus_entered()
  + _on_focus_exited()
}
class N1 as "Bookmark" <<(S,lightskyblue) Sprite2D>> {
}
class N2 as "Sprite2D" <<(S,lightskyblue) Sprite2D>> {
}
class N3 as "AnimationPlayer" <<(A,yellow) AnimationPlayer>> {
}
R --o N1
R --o N3
N1 --o N2
!define _(a,b) a <-[#blue,thickness=2]- b
left to right direction
_(R::_on_focus_entered, R::focus_entered)
_(R::_on_focus_exited, R::focus_exited)
....


=== Assets
[.scene-assets]
.res://assets/images/ui/Chapters/menu/bookmark_blue.png
[link=/assets/assets/images/ui/Chapters/menu/bookmark_blue.png] 
image::/assets/raw/assets/images/ui/Chapters/menu/bookmark_blue.png[200, 100] 

[.scene-assets]
.res://assets/images/ui/Chapters/menu/Bag.png
[link=/assets/assets/images/ui/Chapters/menu/Bag.png] 
image::/assets/raw/assets/images/ui/Chapters/menu/Bag.png[200, 100] 



=== Overridden virtual functions
==== _input
```gdscript
func _input(event: InputEvent) -> void:
	if event.is_action_pressed("ui_accept") && focused:
		pressed.emit()
```


=== Instantiators
* link:/scenes/src/beginning/chapters/menu/menu.tscn[res://src/beginning/chapters/menu/menu.tscn]


=== Scene Tree
[.scene-tree]
* [.node-name.type-control]#BagBookmark# [.node-type.type-control]#MarginContainer#
** [.node-name.type-2d]#Bookmark# [.node-type.type-2d]#Sprite2D#
*** [.node-name.type-2d]#Sprite2D# [.node-type.type-2d]#Sprite2D#
** [.node-name.type-other]#AnimationPlayer# [.node-type.type-other]#AnimationPlayer#


=== Signal Connections
[.signal-connection]
.$.:[#_focus_entered_#]=>$.
```gdscript
func _on_focus_entered() -> void:
	set_focus(true)
```
[.signal-connection]
.$.:[#_focus_exited_#]=>$.
```gdscript
func _on_focus_exited() -> void:
	set_focus(false)
```


=== Animations
==== Animation_ash1f

[plantuml]
....
control "Root" as R
participant "$Bookmark" as T2



== Time: 0.0 ==
R  ->o  R : z_index\n = -1
R  ->  R : modulate\n = Color(0.5, 0.5, 0.5, 1)
R  ->  T2 : position\n = Vector2(70, 106)
R  ->  T2 : scale\n = Vector2(1, 1)


....
---

==== focus

[plantuml]
....
control "Root" as R
participant "$Bookmark" as T2



== Time: 0.0 ==
R  ->  T2 : position\n = Vector2(70, 106)
R  ->  T2 : scale\n = Vector2(1, 1)
== Time: 0.14 ==
R  ->  R : modulate\n = Color(1, 1, 1, 1)
R  ->o  R : z_index\n = 1
R  ->  T2 : position\n = Vector2(70, 250)
R  ->  T2 : scale\n = Vector2(1.2, 1.2)
== Time: 0.25 ==
R  ->  T2 : position\n = Vector2(70, 106)
R  ->  T2 : scale\n = Vector2(1, 1)


....
---

==== unfocus

[plantuml]
....
control "Root" as R
participant "$Bookmark" as T2



== Time: 0.0 ==
R  ->  T2 : position\n = Vector2(70, 106)
R  ->  T2 : scale\n = Vector2(1, 1)
== Time: 0.11 ==
R  ->o  R : z_index\n = 0
R  ->  R : modulate\n = Color(0.5, 0.5, 0.5, 1)
R  ->  T2 : position\n = Vector2(70, 250)
R  ->  T2 : scale\n = Vector2(0.8, 0.8)
== Time: 0.25 ==
R  ->  T2 : position\n = Vector2(70, 106)
R  ->  T2 : scale\n = Vector2(1, 1)


....
---



=== Properties
.#Root# properties
[cols="1,3" options="header"]
|===
|Name |Value
|*modulate* |`Color(0.5, 0.5, 0.5, 1)`
|*z_index* |`-1`
|*custom_minimum_size* |`Vector2(100, 0)`
|*anchors_preset* |`-1`
|*anchor_right* |`0.086`
|*anchor_bottom* |`0.2`
|*offset_right* |`0.87999`
|*size_flags_horizontal* |`6`
|*focus_mode* |`2`
|*script* |`ExtResource("1_mnmi2")`
|===
.#$Bookmark# properties
[cols="1,3" options="header"]
|===
|Name |Value
|*texture_filter* |`2`
|*position* |`Vector2(70, 106)`
|*texture* |`ExtResource("2_12ipe")`
|===
.#$Bookmark/Sprite2D# properties
[cols="1,3" options="header"]
|===
|Name |Value
|*texture* |`ExtResource("2_hvo0s")`
|===
.#$AnimationPlayer# properties
[cols="1,3" options="header"]
|===
|Name |Value
|*unique_name_in_owner* |`true`
|*libraries* |`{
&"": SubResource("AnimationLibrary_0h65v")
}`
|===


=== link:/scripts/src/beginning/chapters/menu/bookmark/bookmark.gd[bookmark.gd]

```gdscript
extends MarginContainer

signal pressed
@export var focused : bool = false : set = set_focus


func _input(event: InputEvent) -> void:
	if event.is_action_pressed("ui_accept") && focused:
		pressed.emit()


func set_focus(val: bool) -> void:
	focused = val
	if val:
		grab_focus()
		%AnimationPlayer.play("focus")
	else:
		%AnimationPlayer.play("unfocus")


func _on_focus_entered() -> void:
	set_focus(true)


func _on_focus_exited() -> void:
	set_focus(false)

```


