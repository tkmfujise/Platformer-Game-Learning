---
title: src/beginning/chapters/menu/bookmark/bookmark.tscn
---
:toc:

== src / beginning / chapters / menu / bookmark / bookmark.tscn

=== Diagram
[plantuml]
....
class ROOT as "BagBookmark" <<(M,lightgreen) MarginContainer>> {
  ~ pressed
---
  * focused
---
  + _input()
  + set_focus()
  + _on_focus_entered()
  + _on_focus_exited()
}
class Bookmark as "Bookmark" <<(S,lightskyblue) Sprite2D>> {
}
class Bookmark_Sprite2D as "Sprite2D" <<(S,lightskyblue) Sprite2D>> {
}
class AnimationPlayer as "AnimationPlayer" <<(A,darkgray) AnimationPlayer>> {
}
ROOT --o Bookmark
ROOT --o AnimationPlayer
Bookmark --o Bookmark_Sprite2D
left to right direction
ROOT::_on_focus_entered <-[#blue,thickness=2]- ROOT::focus_entered
ROOT::_on_focus_exited <-[#blue,thickness=2]- ROOT::focus_exited
....


=== Overridden virtual functions
==== _input
```gdscript
func _input(event: InputEvent) -> void:
	if event.is_action_pressed("ui_accept") && focused:
		pressed.emit()
```



=== Instantiators
* link:/scenes/src/beginning/chapters/menu/menu.tscn[res://src/beginning/chapters/menu/menu.tscn]


=== Scene Tree
[.scene-tree]
* [.node-name.type-control]#BagBookmark# [.node-type.type-control]#MarginContainer#
** [.node-name.type-2d]#Bookmark# [.node-type.type-2d]#Sprite2D#
*** [.node-name.type-2d]#Sprite2D# [.node-type.type-2d]#Sprite2D#
** [.node-name.type-other]#AnimationPlayer# [.node-type.type-other]#AnimationPlayer#


=== Animations
==== Animation_ash1f

[plantuml]
....
control "Root" as Root
participant "Bookmark" as T2



== Time: 0.0 ==
Root  ->o  Root : z_index\n = -1
Root  ->  Root : modulate\n = Color(0.5, 0.5, 0.5, 1)
Root  ->  T2 : position\n = Vector2(70, 106)
Root  ->  T2 : scale\n = Vector2(1, 1)


....
---

==== focus

[plantuml]
....
control "Root" as Root
participant "Bookmark" as T2



== Time: 0.0 ==
Root  ->  T2 : position\n = Vector2(70, 106)
Root  ->  T2 : scale\n = Vector2(1, 1)
== Time: 0.14 ==
Root  ->  Root : modulate\n = Color(1, 1, 1, 1)
Root  ->o  Root : z_index\n = 1
Root  ->  T2 : position\n = Vector2(70, 250)
Root  ->  T2 : scale\n = Vector2(1.2, 1.2)
== Time: 0.25 ==
Root  ->  T2 : position\n = Vector2(70, 106)
Root  ->  T2 : scale\n = Vector2(1, 1)


....
---

==== unfocus

[plantuml]
....
control "Root" as Root
participant "Bookmark" as T2



== Time: 0.0 ==
Root  ->  T2 : position\n = Vector2(70, 106)
Root  ->  T2 : scale\n = Vector2(1, 1)
== Time: 0.11 ==
Root  ->o  Root : z_index\n = 0
Root  ->  Root : modulate\n = Color(0.5, 0.5, 0.5, 1)
Root  ->  T2 : position\n = Vector2(70, 250)
Root  ->  T2 : scale\n = Vector2(0.8, 0.8)
== Time: 0.25 ==
Root  ->  T2 : position\n = Vector2(70, 106)
Root  ->  T2 : scale\n = Vector2(1, 1)


....
---



=== Signal Connections
[cols="1,1,1,2" options="header"]
|===
|From |Name |To |Method
|_._ |*focus_entered* |_._ |`_on_focus_entered`
|_._ |*focus_exited* |_._ |`_on_focus_exited`
|===


=== Properties
[cols="1,1,3" options="header"]
|===
|Section |Name |Value
|_sub_resource_ |*length* |`0.001`
|_sub_resource_ |*tracks/0/type* |`value`
|_sub_resource_ |*tracks/0/imported* |`false`
|_sub_resource_ |*tracks/0/enabled* |`true`
|_sub_resource_ |*tracks/0/path* |`NodePath(".:z_index")`
|_sub_resource_ |*tracks/0/interp* |`1`
|_sub_resource_ |*tracks/0/loop_wrap* |`true`
|_sub_resource_ |*tracks/0/keys* |`{
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [-1]
}`
|_sub_resource_ |*tracks/1/type* |`value`
|_sub_resource_ |*tracks/1/imported* |`false`
|_sub_resource_ |*tracks/1/enabled* |`true`
|_sub_resource_ |*tracks/1/path* |`NodePath(".:modulate")`
|_sub_resource_ |*tracks/1/interp* |`1`
|_sub_resource_ |*tracks/1/loop_wrap* |`true`
|_sub_resource_ |*tracks/1/keys* |`{
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0.5, 0.5, 0.5, 1)]
}`
|_sub_resource_ |*tracks/2/type* |`value`
|_sub_resource_ |*tracks/2/imported* |`false`
|_sub_resource_ |*tracks/2/enabled* |`true`
|_sub_resource_ |*tracks/2/path* |`NodePath("Bookmark:position")`
|_sub_resource_ |*tracks/2/interp* |`1`
|_sub_resource_ |*tracks/2/loop_wrap* |`true`
|_sub_resource_ |*tracks/2/keys* |`{
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(70, 106)]
}`
|_sub_resource_ |*tracks/3/type* |`value`
|_sub_resource_ |*tracks/3/imported* |`false`
|_sub_resource_ |*tracks/3/enabled* |`true`
|_sub_resource_ |*tracks/3/path* |`NodePath("Bookmark:scale")`
|_sub_resource_ |*tracks/3/interp* |`1`
|_sub_resource_ |*tracks/3/loop_wrap* |`true`
|_sub_resource_ |*tracks/3/keys* |`{
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}`
|_sub_resource_ |*resource_name* |`focus`
|_sub_resource_ |*length* |`0.25`
|_sub_resource_ |*step* |`0.01`
|_sub_resource_ |*tracks/0/type* |`value`
|_sub_resource_ |*tracks/0/imported* |`false`
|_sub_resource_ |*tracks/0/enabled* |`true`
|_sub_resource_ |*tracks/0/path* |`NodePath(".:modulate")`
|_sub_resource_ |*tracks/0/interp* |`1`
|_sub_resource_ |*tracks/0/loop_wrap* |`true`
|_sub_resource_ |*tracks/0/keys* |`{
"times": PackedFloat32Array(0.14),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}`
|_sub_resource_ |*tracks/1/type* |`value`
|_sub_resource_ |*tracks/1/imported* |`false`
|_sub_resource_ |*tracks/1/enabled* |`true`
|_sub_resource_ |*tracks/1/path* |`NodePath(".:z_index")`
|_sub_resource_ |*tracks/1/interp* |`1`
|_sub_resource_ |*tracks/1/loop_wrap* |`true`
|_sub_resource_ |*tracks/1/keys* |`{
"times": PackedFloat32Array(0.14),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}`
|_sub_resource_ |*tracks/2/type* |`value`
|_sub_resource_ |*tracks/2/imported* |`false`
|_sub_resource_ |*tracks/2/enabled* |`true`
|_sub_resource_ |*tracks/2/path* |`NodePath("Bookmark:position")`
|_sub_resource_ |*tracks/2/interp* |`1`
|_sub_resource_ |*tracks/2/loop_wrap* |`true`
|_sub_resource_ |*tracks/2/keys* |`{
"times": PackedFloat32Array(0, 0.14, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(70, 106), Vector2(70, 250), Vector2(70, 106)]
}`
|_sub_resource_ |*tracks/3/type* |`value`
|_sub_resource_ |*tracks/3/imported* |`false`
|_sub_resource_ |*tracks/3/enabled* |`true`
|_sub_resource_ |*tracks/3/path* |`NodePath("Bookmark:scale")`
|_sub_resource_ |*tracks/3/interp* |`1`
|_sub_resource_ |*tracks/3/loop_wrap* |`true`
|_sub_resource_ |*tracks/3/keys* |`{
"times": PackedFloat32Array(0, 0.14, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(1.2, 1.2), Vector2(1, 1)]
}`
|_sub_resource_ |*resource_name* |`unfocus`
|_sub_resource_ |*length* |`0.25`
|_sub_resource_ |*step* |`0.01`
|_sub_resource_ |*tracks/0/type* |`value`
|_sub_resource_ |*tracks/0/imported* |`false`
|_sub_resource_ |*tracks/0/enabled* |`true`
|_sub_resource_ |*tracks/0/path* |`NodePath(".:z_index")`
|_sub_resource_ |*tracks/0/interp* |`1`
|_sub_resource_ |*tracks/0/loop_wrap* |`true`
|_sub_resource_ |*tracks/0/keys* |`{
"times": PackedFloat32Array(0.11),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}`
|_sub_resource_ |*tracks/1/type* |`value`
|_sub_resource_ |*tracks/1/imported* |`false`
|_sub_resource_ |*tracks/1/enabled* |`true`
|_sub_resource_ |*tracks/1/path* |`NodePath(".:modulate")`
|_sub_resource_ |*tracks/1/interp* |`1`
|_sub_resource_ |*tracks/1/loop_wrap* |`true`
|_sub_resource_ |*tracks/1/keys* |`{
"times": PackedFloat32Array(0.11),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0.5, 0.5, 0.5, 1)]
}`
|_sub_resource_ |*tracks/2/type* |`value`
|_sub_resource_ |*tracks/2/imported* |`false`
|_sub_resource_ |*tracks/2/enabled* |`true`
|_sub_resource_ |*tracks/2/path* |`NodePath("Bookmark:position")`
|_sub_resource_ |*tracks/2/interp* |`1`
|_sub_resource_ |*tracks/2/loop_wrap* |`true`
|_sub_resource_ |*tracks/2/keys* |`{
"times": PackedFloat32Array(0, 0.11, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(70, 106), Vector2(70, 250), Vector2(70, 106)]
}`
|_sub_resource_ |*tracks/3/type* |`value`
|_sub_resource_ |*tracks/3/imported* |`false`
|_sub_resource_ |*tracks/3/enabled* |`true`
|_sub_resource_ |*tracks/3/path* |`NodePath("Bookmark:scale")`
|_sub_resource_ |*tracks/3/interp* |`1`
|_sub_resource_ |*tracks/3/loop_wrap* |`true`
|_sub_resource_ |*tracks/3/keys* |`{
"times": PackedFloat32Array(0, 0.11, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(0.8, 0.8), Vector2(1, 1)]
}`
|_sub_resource_ |*_data* |`{
&"RESET": SubResource("Animation_ash1f"),
&"focus": SubResource("Animation_28ufr"),
&"unfocus": SubResource("Animation_3jvls")
}`
|_node_ |*modulate* |`Color(0.5, 0.5, 0.5, 1)`
|_node_ |*z_index* |`-1`
|_node_ |*custom_minimum_size* |`Vector2(100, 0)`
|_node_ |*anchors_preset* |`-1`
|_node_ |*anchor_right* |`0.086`
|_node_ |*anchor_bottom* |`0.2`
|_node_ |*offset_right* |`0.87999`
|_node_ |*size_flags_horizontal* |`6`
|_node_ |*focus_mode* |`2`
|_node_ |*script* |`ExtResource("1_mnmi2")`
|_node_ |*texture_filter* |`2`
|_node_ |*position* |`Vector2(70, 106)`
|_node_ |*texture* |`ExtResource("2_12ipe")`
|_node_ |*texture* |`ExtResource("2_hvo0s")`
|_node_ |*unique_name_in_owner* |`true`
|_node_ |*libraries* |`{
&"": SubResource("AnimationLibrary_0h65v")
}`
|===


=== link:/scripts/src/beginning/chapters/menu/bookmark/bookmark.gd[bookmark.gd]

```gdscript
extends MarginContainer

signal pressed
@export var focused : bool = false : set = set_focus


func _input(event: InputEvent) -> void:
	if event.is_action_pressed("ui_accept") && focused:
		pressed.emit()


func set_focus(val: bool) -> void:
	focused = val
	if val:
		grab_focus()
		%AnimationPlayer.play("focus")
	else:
		%AnimationPlayer.play("unfocus")


func _on_focus_entered() -> void:
	set_focus(true)


func _on_focus_exited() -> void:
	set_focus(false)

```


