<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Platformer Game Learning - res://resources/account_resource.gd</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="/assets/css/pico.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/syntax.gessetti.css">
    <link rel="stylesheet" href="/assets/css/admonitionblock.css">
    <script src="/assets/js/main.js"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="Nanoc 4.14.5">
  </head>
  <body>
    <header>
  <nav class="container">
    <ul>
      <li><strong><a href="/">Platformer Game Learning</a></strong></li>
    </ul>
    <ul>
      <li class="visible-if-portrait">
        <button class="toggle-contents-menu secondary"'>Menu</button>
      </li>
    </ul>
  </nav>
</header>


    <main>
      <aside class="contents-menu">
        

<nav>
  
    <details name="category" >
      <summary><b>Scenes</b></summary>
      <ul>
        
          <li>
            <a class="" href="/scenes/autoloads/bgm/bgm.tscn/">autoloads/bgm/bgm.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/autoloads/current/current.tscn/">autoloads/current/current.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/autoloads/keyboard_handler/keyboard_handler.tscn/">autoloads/keyboard_handler/keyboard_handler.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/debug/chapters/chapters.tscn/">debug/chapters/chapters.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/account/account.tscn/">src/account/account.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/accounts/accounts.tscn/">src/beginning/accounts/accounts.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/chapters/banner/banner.tscn/">src/beginning/chapters/banner/banner.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/chapters/chapter/chapter.tscn/">src/beginning/chapters/chapter/chapter.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/chapters/chapters.tscn/">src/beginning/chapters/chapters.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/chapters/menu/bookmark/bookmark.tscn/">src/beginning/chapters/menu/bookmark/bookmark.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/chapters/menu/menu.tscn/">src/beginning/chapters/menu/menu.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/chapters/menu/photo/photo.tscn/">src/beginning/chapters/menu/photo/photo.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/menu/menu.tscn/">src/beginning/menu/menu.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/screen/screen.tscn/">src/beginning/screen/screen.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/beginning/screen/snow/snow.tscn/">src/beginning/screen/snow/snow.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/chapters/0/stages/0/stage_0.tscn/">src/chapters/0/stages/0/stage_0.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/curtain/closing/closing.tscn/">src/curtain/closing/closing.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/curtain/opening/opening.tscn/">src/curtain/opening/opening.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/main.tscn/">src/main.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/mixins/first_steps_bgm_playable/first_steps_bgm_playable.tscn/">src/mixins/first_steps_bgm_playable/first_steps_bgm_playable.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/player/camera/camera.tscn/">src/player/camera/camera.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/player/ghost_effect/ghost_effect.tscn/">src/player/ghost_effect/ghost_effect.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/player/player.tscn/">src/player/player.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/stages/0/staege_ground_0.tscn/">src/stages/0/staege_ground_0.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/stages/background/forest/forest.tscn/">src/stages/background/forest/forest.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/stages/fall_zone/fall_zone.tscn/">src/stages/fall_zone/fall_zone.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/stages/frame/camera_frame.tscn/">src/stages/frame/camera_frame.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/stages/gimmicks/falling_ice_block/falling_ice_block.tscn/">src/stages/gimmicks/falling_ice_block/falling_ice_block.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/stages/weather/snow/snow.tscn/">src/stages/weather/snow/snow.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/stages/weather/weather.tscn/">src/stages/weather/weather.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/ui/button/button.tscn/">src/ui/button/button.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/world/mist/mist.tscn/">src/world/mist/mist.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/world/pin/pin.tscn/">src/world/pin/pin.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/world/snow/snow.tscn/">src/world/snow/snow.tscn</a>
          </li>
        
          <li>
            <a class="" href="/scenes/src/world/world.tscn/">src/world/world.tscn</a>
          </li>
        
      </ul>
    </details>
  
    <details name="category" open>
      <summary><b>Scripts</b></summary>
      <ul>
        
          <li>
            <a class="" href="/scripts/autoloads/bgm/bgm.gd/">autoloads/bgm/bgm.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/autoloads/current/current.gd/">autoloads/current/current.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/autoloads/game_event/game_event.gd/">autoloads/game_event/game_event.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/autoloads/keyboard_handler/keyboard_handler.gd/">autoloads/keyboard_handler/keyboard_handler.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/autoloads/preference/preference.gd/">autoloads/preference/preference.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/debug/chapters/chapters.gd/">debug/chapters/chapters.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/dev/helper.gd/">dev/helper.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/resources/account_chapter_resource.gd/">resources/account_chapter_resource.gd</a>
          </li>
        
          <li>
            <a class="selected" href="/scripts/resources/account_resource.gd/">resources/account_resource.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/resources/account_stage_resource.gd/">resources/account_stage_resource.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/resources/chapter_resource.gd/">resources/chapter_resource.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/resources/stage_resource.gd/">resources/stage_resource.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/account/account.gd/">src/account/account.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/beginning/accounts/accounts.gd/">src/beginning/accounts/accounts.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/beginning/chapters/chapter/chapter.gd/">src/beginning/chapters/chapter/chapter.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/beginning/chapters/chapters.gd/">src/beginning/chapters/chapters.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/beginning/chapters/menu/bookmark/bookmark.gd/">src/beginning/chapters/menu/bookmark/bookmark.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/beginning/chapters/menu/menu.gd/">src/beginning/chapters/menu/menu.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/beginning/chapters/menu/photo/photo.gd/">src/beginning/chapters/menu/photo/photo.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/beginning/menu/menu.gd/">src/beginning/menu/menu.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/beginning/screen/screen.gd/">src/beginning/screen/screen.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/chapters/0/stages/0/stage_0.gd/">src/chapters/0/stages/0/stage_0.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/curtain/closing/closing.gd/">src/curtain/closing/closing.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/curtain/opening/opening.gd/">src/curtain/opening/opening.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/helpers/array_helper.gd/">src/helpers/array_helper.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/helpers/focus_helper.gd/">src/helpers/focus_helper.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/helpers/resource_helper.gd/">src/helpers/resource_helper.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/helpers/scene_helper.gd/">src/helpers/scene_helper.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/mixins/first_steps_bgm_playable/first_steps_bgm_playable.gd/">src/mixins/first_steps_bgm_playable/first_steps_bgm_playable.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/player/camera/camera.gd/">src/player/camera/camera.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/player/ghost_effect/ghost_effect.gd/">src/player/ghost_effect/ghost_effect.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/player/player.gd/">src/player/player.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/stages/frame/camera_frame.gd/">src/stages/frame/camera_frame.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/stages/gimmicks/falling_ice_block/falling_ice_block.gd/">src/stages/gimmicks/falling_ice_block/falling_ice_block.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/stages/weather/weather.gd/">src/stages/weather/weather.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/ui/button/button.gd/">src/ui/button/button.gd</a>
          </li>
        
          <li>
            <a class="" href="/scripts/src/world/world.gd/">src/world/world.gd</a>
          </li>
        
      </ul>
    </details>
  
    <details name="category" >
      <summary><b>Resources</b></summary>
      <ul>
        
          <li>
            <a class="" href="/resources/data/chapters/chapter_0.tres/">data/chapters/chapter_0.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/chapters/chapter_1.tres/">data/chapters/chapter_1.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/chapters/chapter_2.tres/">data/chapters/chapter_2.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/chapters/chapter_3.tres/">data/chapters/chapter_3.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/chapters/chapter_4.tres/">data/chapters/chapter_4.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/chapters/chapter_5.tres/">data/chapters/chapter_5.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/chapters/chapter_6.tres/">data/chapters/chapter_6.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/chapters/chapter_7.tres/">data/chapters/chapter_7.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/chapters/chapter_8.tres/">data/chapters/chapter_8.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/test/account/empty_account.tres/">data/test/account/empty_account.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/test/account/full_account.tres/">data/test/account/full_account.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/data/test/account/test_account.tres/">data/test/account/test_account.tres</a>
          </li>
        
          <li>
            <a class="" href="/resources/themes/default_theme.tres/">themes/default_theme.tres</a>
          </li>
        
      </ul>
    </details>
  
</nav>

      </aside>
      <article class="content">
        <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_resources_account_resource_gd">resources / account_resource.gd</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_resources_account_resource_gd">resources / account_resource.gd</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gdscript"><span class="k">extends</span> <span class="n">Resource</span>
<span class="k">class_name</span> <span class="n">AccountResource</span>

<span class="k">const</span> <span class="n">PATH</span> <span class="o">=</span> <span class="s2">"user://data/account-data_</span><span class="si">%s</span><span class="s2">.json"</span>

<span class="err">@</span><span class="k">export</span> <span class="k">var</span> <span class="n">number</span> <span class="p">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="err">@</span><span class="k">export</span> <span class="k">var</span> <span class="n">player_name</span> <span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s2">'</span><span class="s1">Player'</span>
<span class="err">@</span><span class="k">export</span> <span class="k">var</span> <span class="n">latest_chapter_name</span> <span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s2">'</span><span class="s1">Opening'</span>
<span class="err">@</span><span class="k">export</span> <span class="k">var</span> <span class="n">chapters</span> <span class="p">:</span> <span class="kt">Array</span><span class="p">[</span><span class="n">AccountChapterResource</span><span class="p">]</span>

<span class="k">static</span> <span class="k">func</span> <span class="nf">parse_mapping</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Dictionary</span><span class="p">:</span>
	<span class="k">return</span> <span class="p">{</span> <span class="s2">'</span><span class="s1">chapters'</span><span class="p">:</span> <span class="n">AccountChapterResource</span> <span class="p">}</span>


<span class="k">static</span> <span class="k">func</span> <span class="nf">find_or_initialize</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountResource</span><span class="p">:</span>
	<span class="k">var</span> <span class="n">resource</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">resource</span><span class="p">:</span>
		<span class="n">resource</span> <span class="o">=</span> <span class="n">AccountResource</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
		<span class="n">resource</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">resource</span>


<span class="k">static</span> <span class="k">func</span> <span class="nf">find</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountResource</span><span class="p">:</span>
	<span class="k">var</span> <span class="n">path</span> <span class="o">=</span> <span class="n">PATH</span> <span class="o">%</span> <span class="n">number</span>
	<span class="k">if</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">file_exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
		<span class="k">var</span> <span class="n">f</span> <span class="o">=</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
		<span class="k">var</span> <span class="n">json</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_as_text</span><span class="p">()</span>
		<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
		<span class="k">return</span> <span class="n">ResourceHelper</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">AccountResource</span><span class="p">,</span> <span class="n">json</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="kt">null</span>


<span class="k">func</span> <span class="nf">setup</span><span class="p">(</span><span class="n">_number</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">void</span><span class="p">:</span>
	<span class="n">number</span> <span class="o">=</span> <span class="n">_number</span>


<span class="k">func</span> <span class="nf">save</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">void</span><span class="p">:</span>
	<span class="k">var</span> <span class="n">path</span> <span class="o">=</span> <span class="n">PATH</span> <span class="o">%</span> <span class="n">number</span>
	<span class="k">var</span> <span class="n">dir</span>  <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">get_base_dir</span><span class="p">()</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">DirAccess</span><span class="o">.</span><span class="n">dir_exists_absolute</span><span class="p">(</span><span class="n">dir</span><span class="p">):</span>
		<span class="n">DirAccess</span><span class="o">.</span><span class="n">make_dir_recursive_absolute</span><span class="p">(</span><span class="n">dir</span><span class="p">)</span>
	<span class="k">var</span> <span class="n">f</span> <span class="o">=</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">WRITE</span><span class="p">)</span>
	<span class="n">f</span><span class="o">.</span><span class="n">store_string</span><span class="p">(</span><span class="n">ResourceHelper</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
	<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">func</span> <span class="nf">delete</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">void</span><span class="p">:</span>
	<span class="k">var</span> <span class="n">path</span> <span class="o">=</span> <span class="n">PATH</span> <span class="o">%</span> <span class="n">number</span>
	<span class="k">if</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">file_exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
		<span class="k">var</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">DirAccess</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">get_base_dir</span><span class="p">())</span>
		<span class="n">dir</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>


<span class="k">func</span> <span class="nf">attr</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span><span class="p">:</span>
	<span class="k">match</span> <span class="n">key</span><span class="p">:</span>
		<span class="s2">'</span><span class="s1">total_play_time'</span><span class="p">:</span> <span class="k">return</span> <span class="n">total_play_time</span><span class="p">()</span>
		<span class="s2">'</span><span class="s1">obtained_strawberry_count'</span><span class="p">:</span> <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obtained_strawberry_count</span><span class="p">())</span>
		<span class="s2">'</span><span class="s1">total_failure_count'</span><span class="p">:</span> <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">total_failure_count</span><span class="p">())</span>
		<span class="n">_</span><span class="p">:</span> <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>


<span class="k">func</span> <span class="nf">total_play_time</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">String</span><span class="p">:</span>
	<span class="k">var</span> <span class="n">dict</span> <span class="o">=</span> <span class="n">total_play_time_dict</span><span class="p">()</span>
	<span class="k">return</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">:</span><span class="si">%02d</span><span class="s2">:</span><span class="si">%02d</span><span class="s2">.</span><span class="si">%03d</span><span class="s2">"</span> <span class="o">%</span> <span class="p">[</span><span class="n">dict</span><span class="p">[</span><span class="s2">'</span><span class="s1">hour'</span><span class="p">],</span> <span class="n">dict</span><span class="p">[</span><span class="s2">'</span><span class="s1">minute'</span><span class="p">],</span> <span class="n">dict</span><span class="p">[</span><span class="s2">'</span><span class="s1">second'</span><span class="p">],</span> <span class="n">dict</span><span class="p">[</span><span class="s2">'</span><span class="s1">msec'</span><span class="p">]]</span>


<span class="k">func</span> <span class="nf">latest_chapter</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">AccountChapterResource</span><span class="p">:</span>
	<span class="k">var</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">chapters</span>
	<span class="n">arr</span><span class="o">.</span><span class="n">sort_custom</span><span class="p">(</span><span class="k">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">number</span> <span class="o">&lt;</span> <span class="n">b</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">arr</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">arr</span> <span class="k">else</span> <span class="kt">null</span>


<span class="k">func</span> <span class="nf">get_chapter</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountChapterResource</span><span class="p">:</span>
	<span class="k">var</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">chapters</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">func</span><span class="p">(</span><span class="n">c</span><span class="p">):</span> <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">number</span> <span class="o">==</span> <span class="n">number</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">arr</span> <span class="k">else</span> <span class="kt">null</span>


<span class="k">func</span> <span class="nf">obtained_strawberry_count</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">ArrayHelper</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">chapters</span><span class="p">,</span> <span class="s2">'</span><span class="s1">obtained_strawberry_count()'</span><span class="p">)</span>


<span class="k">func</span> <span class="nf">total_failure_count</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">ArrayHelper</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">chapters</span><span class="p">,</span> <span class="s2">'</span><span class="s1">total_failure_count()'</span><span class="p">)</span>


<span class="k">func</span> <span class="nf">total_play_msec</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">ArrayHelper</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">chapters</span><span class="p">,</span> <span class="s2">'</span><span class="s1">total_play_msec()'</span><span class="p">)</span>


<span class="k">func</span> <span class="nf">obtained_blue_hearts</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Array</span><span class="p">[</span><span class="kt">bool</span><span class="p">]:</span>
	<span class="k">return</span> <span class="n">obtained_in_chapters</span><span class="p">(</span><span class="s2">'</span><span class="s1">obtained_blue_heart'</span><span class="p">)</span>


<span class="k">func</span> <span class="nf">obtained_cassettes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Array</span><span class="p">[</span><span class="kt">bool</span><span class="p">]:</span>
	<span class="k">return</span> <span class="n">obtained_in_chapters</span><span class="p">(</span><span class="s2">'</span><span class="s1">obtained_cassette'</span><span class="p">)</span>


<span class="k">func</span> <span class="nf">total_play_time_dict</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Dictionary</span><span class="p">:</span>
	<span class="k">var</span> <span class="n">msec</span> <span class="o">=</span> <span class="n">total_play_msec</span><span class="p">()</span>
	<span class="k">return</span> <span class="p">{</span>
		<span class="s2">'</span><span class="s1">hour'</span><span class="p">:</span>   <span class="p">(</span><span class="n">msec</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">60</span> <span class="o">/</span> <span class="mi">60</span><span class="p">),</span>
		<span class="s2">'</span><span class="s1">minute'</span><span class="p">:</span> <span class="p">(</span><span class="n">msec</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span> <span class="o">%</span> <span class="mi">60</span><span class="p">,</span>
		<span class="s2">'</span><span class="s1">second'</span><span class="p">:</span> <span class="p">(</span><span class="n">msec</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">%</span> <span class="mi">60</span><span class="p">,</span>
		<span class="s2">'</span><span class="s1">msec'</span><span class="p">:</span>   <span class="n">msec</span> <span class="o">%</span> <span class="mi">1000</span><span class="p">,</span>
	<span class="p">}</span>


<span class="k">func</span> <span class="nf">obtained_in_chapters</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Array</span><span class="p">[</span><span class="kt">bool</span><span class="p">]:</span>
	<span class="k">var</span> <span class="n">arr</span> <span class="p">:</span> <span class="kt">Array</span><span class="p">[</span><span class="kt">bool</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ChapterResource</span><span class="o">.</span><span class="n">MAX_NUMBER</span><span class="p">:</span> <span class="n">arr</span><span class="o">.</span><span class="n">push_back</span><span class="p">(</span><span class="bp">false</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">chapter</span> <span class="ow">in</span> <span class="n">chapters</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">chapter</span><span class="p">:</span> <span class="k">continue</span>
		<span class="n">arr</span><span class="p">[</span><span class="n">chapter</span><span class="o">.</span><span class="n">number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">chapter</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">arr</span></code></pre>
</div>
</div>
</div>
</div>
      </article>
    </main>
    <footer>
  <nav class="container">
    <ul>
      <li>This site was built by <a href="https://github.com/tkmfujise/gd-doc">gd-doc</a> using <a href="https://nanoc.app/">Nanoc</a>.</li>
    </ul>
  </nav>
</footer>

  </body>
</html>
